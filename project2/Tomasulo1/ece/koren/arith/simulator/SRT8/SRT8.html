<HTML>
<HEAD>
<TITLE> Radix-8 SRT Division </TITLE>
<SCRIPT language="JavaScript">



function MakeLine(NumColumns) {
        return "<TR> <TD colspan=" + NumColumns + "> <HR noshade size=1>\n";
}

function PrintError(Message) {
        Error = "<CENTER><H1> ERROR </H1></CENTER> <P>\n"
        Error += "<CENTER> <EM>" + Message + "</EM> </CENTER>\n"
        return Error
}

function ParseBinary (BinNum) {
        // Turns a binary number into a decimal, sets a flag to true if
        // BinNum is not actually binary

        IsNeg = false
        if (BinNum < 0) {
                IsNeg = true
                BinNum *= -1
        }
        RealNum = 0
        LogBaseTen = Math.log(BinNum)/Math.LN10
        HighestPlace = Math.ceil(LogBaseTen)
        for (CurPlace = HighestPlace; CurPlace >= -NumBits; CurPlace--) {
                CurEntry = Math.round(BinNum / Math.pow(10, CurPlace))
                if (CurEntry != 0 && CurEntry != 1) {
                        NotBinary = true
                        CurEntry = 1 // feed it something normal, to avoid
                                         // wierd Javascript errors
                }
                if (CurEntry == 1) {
                        RealNum += Math.pow(2, CurPlace)
                        BinNum -= Math.pow(10, CurPlace)
                }
        }
        if (IsNeg) {RealNum *= -1} // reverse it back at the end

        // now check if the number was negative according to two's complement
        // representation - if it was, set the decimal value to this negative
        // number
        if (HighestPlace == NumBits) {
                RealNum -= Math.pow(2, NumBits)
        }

        return RealNum
}

function OrderOfMagnitude (TheNum) {
        // returns the highest place which has a "1" in TheNum's
        // binary representation

        TheNum += Math.pow(10, -1 - NumBits) // kludge so processor
                                            // won't mess up

        // to account for 2's complement representation...
        TheNum < 0 ? TheNum *= -2 : TheNum *= 2


        LogBaseTwo = Math.log(TheNum)/Math.LN2;
        return Math.floor(LogBaseTwo)
}

function TwosComp(TheNum, StartPlace) {
        NumStarted = false;
        NumDigits = StartPlace + NumDecimals + 1;

        // first deal with negative numbers...
        if (StartPlace < 0) {StartPlace == 0}
        if (TheNum < 0) {TheNum += Math.pow(2, StartPlace + 1)}

        // now initialize the string
        S = "";
        for (TheDigit = 1; TheDigit <= NumDigits; TheDigit++) {
                CurPlace = NumDigits - NumDecimals - TheDigit;
                if (CurPlace == 0) {NumStarted = true}
                if (CurPlace == -1) {S += "."}
                CurPower = Math.pow(2, CurPlace);
                if (TheNum >= CurPower) {
                        NumStarted = true;
                        S += "1";
                        TheNum -= CurPower
                } else if (NumStarted) {
                        S += "0";
                } // otherwise, print nothing
        }
        return S;
}

function RoundOff (TheNum) {
        // returns the value TheNum would have if it were represented by
        // NumDecimals bits after the decimal point
        Scaling = Math.pow(2, NumDecimals)
        return (Math.round(TheNum * Scaling) / Scaling)
}

function PrintTwosComp(TheNum, StartPlace) {

        if (StartPlace < 0) {StartPlace = 0}
        // first deal with negative numbers...
        if (TheNum < 0) {TheNum += Math.pow(2, StartPlace + 1)}

        // now initialize the string
        S = "";
        for (CurPlace = NumCols - NumDecimals; CurPlace > StartPlace; CurPlace--) {
                S += "<TD> "
        }
        for (CurPlace = StartPlace; CurPlace >= -NumDecimals; CurPlace--) {
                S += "<TD> ";
                if (CurPlace == -1) {
                        S += ".";
                }
                CurPower = Math.pow(2, CurPlace);
                if (TheNum >= CurPower) {
                        S += "1 ";
                        TheNum -= CurPower
                } else {S += "0 "} 
        }
        return S;
}

function SRT(form) {
        X = parseFloat(form.X.value)
        D = parseFloat(form.D.value)
        // Global variables... assigned from within a procedure...

        xlargerd4 = 0;
        xlargerd5 = 0;
        xlargerd6 = 0;
        xlargerd7 = 0;

        NumBits = parseInt(form.NumBits.value) + 1;
        ChoseBin = form.Base[0].checked;
        NotBinary = false;
        if (ChoseBin) {
                X = ParseBinary(X);
                D = ParseBinary(D);
        }
        
        if(form.alpha[0].checked) {
          if(Math.abs(X) > 4.0/7.0 * D) xlargerd4 = 1;
	}
	if(form.alpha[1].checked) {
	  if(Math.abs(X) > 5.0/7.0 * D) xlargerd5 = 1;
        }
        if(form.alpha[2].checked) {
          if(Math.abs(X) > 6.0/7.0 * D) xlargerd6 = 1;
        }
        else{
          if (Math.abs(X) > D)  xlargerd7 = 1;
        }
        
        NumDigits = Math.max(OrderOfMagnitude(X), OrderOfMagnitude(D)) + 2
        if (NumDigits < 1) {NumDigits = 1}
        NumDecimals = NumBits - NumDigits
        NumCols = NumDecimals + NumDigits

        TheTop = "<HTML><HEAD><TITLE>Tablet</TITLE></HEAD><BODY bgcolor=white>"
        X = RoundOff(X)
        D = RoundOff(D)
        Middle = "X = " + X + ", D = " + D + "<P>\n"
        Middle = "<TABLE>"

        Q = 0;
        r = X;
        ZeroRem = false

        if(form.alpha[0].checked) {
          Middle += "<IMG SRC = ./alpha4.gif>"
          Middle += "<IMG SRC = ./alpha4neg.gif>"
	}
	if(form.alpha[1].checked) {
          Middle += "<IMG SRC = ./alpha5.gif>"
          Middle += "<IMG SRC = ./alpha5neg.gif>"
        }
        if(form.alpha[2].checked) {
          Middle += "<IMG SRC = ./alpha6.gif>"
          Middle += "<IMG SRC = ./alpha6neg.gif>"
        }
        if(form.alpha[3].checked) {
          Middle += "<IMG SRC = ./alpha7.gif>"
          Middle += "<IMG SRC = ./alpha7neg.gif>"
        }




        Middle += "<TR> <TD> r<SUB>0</SUB> = X <TD>";
        Middle += PrintTwosComp(r, OrderOfMagnitude(r) + 1);
        Middle += "<TD>\n"
        NumDec_8 = Math.floor(NumDecimals/3);




	  if(D < 0.625) { k1 = 0.28125; sk1="0.010010"}
          else if(D < 0.75) { k1 = 0.34375; sk1="0.010110"}   
          else if(D < 0.875) { k1 = 0.40625; sk1="0.011010"}
          else {k1 = 0.4375; sk1="0.01110"}


          
          if(D < 0.5390625) { k2 = 0.78125; sk2="0.110010"}
          else if(D < 0.5859375) { k2 = 0.84375; sk2="0.110110"}
          else if(D < 0.625) { k2 = 0.90625; sk2="0.111010"}
          else if(D < 0.671875) { k2 = 0.96875; sk2="0.111110"}   
          else if(D < 0.7109375) { k2 = 1.03125; sk2="1.000010"}
          else if(D < 0.75) { k2 = 1.09375; sk2="1.000110"}
          else if(D < 0.796875) { k2 = 1.15625; sk2="1.001010"}   
          else if(D < 0.84375) { k2 = 1.21875; sk2="1.001110"}
          else if(D < 0.9140625) { k2 = 1.3125; sk2="1.01010"}
          else if(D < 0.96875) { k2 = 1.40625; sk2="1.011010"}
          else {k2 = 1.5; sk2="1.10"}
          
          if(D < 0.5234375) { k3 = 1.28125; sk3="1.010010"}
          else if(D < 0.546875) { k3 = 1.34375; sk3="1.010110"}
          else if(D < 0.5703125) { k3 = 1.40625; sk3="1.011010"}
          else if(D < 0.5859375) { k3 = 1.4375; sk3="1.01110"}
          else if(D < 0.609375) { k3 = 1.5; sk3="1.10"}
          else if(D < 0.640625) { k3 = 1.5625; sk3="1.10010"}
          else if(D < 0.6640625) { k3 = 1.625; sk3="1.1010"}
          else if(D < 0.6875) { k3 = 1.6875; sk3="1.10110"}
          else if(D < 0.71875) { k3 = 1.75; sk3="1.110"}
          else if(D < 0.75) { k3 = 1.84375; sk3="1.110110"}
          else if(D < 0.7734375) { k3 = 1.90625; sk3="1.111010"}
          else if(D < 0.8046875) { k3 = 1.96875; sk3="1.111110"}
          else if(D < 0.84375) { k3 = 2.0625; sk3="10.00010"}
          else if(D < 0.875) { k3 = 2.15625; sk3="10.001010"}
          else if(D < 0.8984375) { k3 = 2.21875; sk3="10.001110"}
          else if(D < 0.9296875) { k3 = 2.28125; sk3="10.010010"}
          else if(D < 0.96875) { k3 = 2.375; sk3="10.0110"}
          else {k3 = 2.46875; sk3="10.011110"}

          if(D < 0.5078125) { k4 = 1.78125; sk4="1.110010"}
          else if(D < 0.5234375) {k4 = 1.8125; sk4="1.11010"}
          else if(D < 0.53125) {k4 = 1.84375; sk4="1.110110"}
          else if(D < 0.5390625) {k4 = 1.875; sk4="1.1110"}
          else if(D < 0.5546875) {k4 = 1.90625; sk4="1.111010"}
          else if(D < 0.5703125) { k4 = 1.96875; sk4="1.111110"}
          else if(D < 0.5859375) {k4 = 2.03125; sk4="10.000010"}
          else if(D < 0.6015625) {k4 = 2.0625; sk4="10.00010"}
          else if(D < 0.6171875) {k4 = 2.125; sk4="10.0010"}
          else if(D < 0.6328125) { k4 = 2.1875; sk4="10.00110"}
          else if(D < 0.6484375) {k4 = 2.25; sk4="10.010"}
          else if(D < 0.6640625) {k4 = 2.28125; sk4="10.010010"}
          else if(D < 0.6796875) {k4 = 2.34375; sk4="10.010110"}
          else if(D < 0.6953125) {k4 = 2.40625; sk4="10.011010"}
          else if(D < 0.7109375) { k4 = 2.46875; sk4="10.011110"}
          else if(D < 0.734375) {k4 = 2.53125; sk4="10.100010"}
          else if(D < 0.75) {k4 = 2.59375; sk4="10.100110"}
          else if(D < 0.765625) {k4 = 2.65625; sk4="10.101010"}
          else if(D < 0.7890625) { k4 = 2.71875; sk4="10.101110"}
          else if(D < 0.8125) {k4 = 2.8125; sk4="10.11010"}
          else if(D < 0.828125) {k4 = 2.875; sk4="10.1110"}
          else if(D < 0.8515625) {k4 = 2.9375; sk4="10.11110"}
          else if(D < 0.875) {k4 = 3.03125; sk4="11.000010"}
          else if(D < 0.8984375) { k4 = 3.09375; sk4="11.000110"}
          else if(D < 0.921875) {k4 = 3.1875; sk4="11.00110"}
          else if(D < 0.9453125) {k4 = 3.28125; sk4="11.010010"}
          else if(D < 0.96875) {k4 = 3.34375; sk4="11.010110"}        
          else {k4 = 3.4375;sk4="11.01110"}
          
	  if(D < 0.75) { h1 = 0.25; sh1="0.010"}
          else {h1 = 0.5; sh1="0.10"}
          
          if(D < 0.53125) { h2 = 0.75; sh2="0.110"}
          else if(D < 0.625) { h2 = 0.875; sh2="0.111"}   
          else if(D < 0.75) { h2 = 1.0; sh2="1.0"}
          else if(D < 0.875) { h2 = 1.25; sh2="1.010"}
          else {h2 = 1.375; sh2="1.0110"}
          
          if(D < 0.53125) { h3 = 1.25; sh3="1.110"}
          else if(D < 0.59375) { h3 = 1.375; sh3="10.0"}
          else if(D < 0.625) { h3 = 1.5; sh3="1.10"}
          else if(D < 0.6875) { h3 = 1.625; sh3="1.1010"}
          else if(D < 0.75) { h3 = 1.75; sh3="1.110"}
          else if(D < 0.84375) { h3 = 2.0; sh3="10.0"}
          else if(D < 0.96875) { h3 = 2.25; sh3="10.010"}
          else {h3 = 2.5; sh3="10.10"}
          
          if(D < 0.515625) { h4 = 1.75; sh4="1.110"}
          else if(D < 0.5625) {h4 = 1.875; sh4="1.1110"}
          else if(D < 0.59375) {h4 = 2.0; sh4="10.0"}
          else if(D < 0.625) {h4 = 2.125; sh4="10.0010"}
          else if(D < 0.65625) {h4 = 2.25; sh4="10.010"}
          else if(D < 0.6875) { h4 = 2.375; sh4="10.0110"}
          else if(D < 0.75) {h4 = 2.5; sh4="10.10"}
          else if(D < 0.8125) {h4 = 2.75; sh4="10.110"}
          else if(D < 0.875) {h4 = 3.0; sh4="11.0"}
          else if(D < 0.9375) { h4 = 3.125; sh4="11.0010"}
          else {h4 = 3.375;sh4="11.0110"}
          
          if(D < 0.53125) { h5 = 2.3125; sh5="10.01010"}
          else if(D < 0.5625) {h5 = 2.5; sh5="10.10"}
          else if(D < 0.59375) {h5 = 2.625; sh5="10.1010"}
          else if(D < 0.625) {h5 = 2.75; sh5="11.0"}
          else if(D < 0.65625) {h5 = 2.875; sh5="10.1110"}
          else if(D < 0.6875) {h5 = 3.0; sh5="11.0"}
          else if(D < 0.71875) {h5 = 3.125; sh5="11.0010"}
          else if(D < 0.78125) { h5 = 3.375; sh5="11.0110"}
          else if(D < 0.84375) {h5 = 3.625; sh5="11.1010"}
          else if(D < 0.875) {h5 = 3.875; sh5="11.1110"}
          else if(D < 0.90625) {h5 = 4.0; sh5="100.0"}
          else if(D < 0.96875) {h5 = 4.25; sh5="100.010"}
          else {h5 = 4.5;sh5="100.10"}
	  
	  
	  
	  g1 = 0.25; sg1="0.01"
	  
          if(D < 0.625) { g2 = 0.75; sg2="0.110"}
          else if(D < 0.75) { g2 = 1.0; sg2="1.0"}   
          else if(D < 0.875) { g2 = 1.25; sg2="1.010"}
          else {g2 = 1.5; sg2="1.10"}
          
          if(D < 0.53125) { g3 = 1.75; sg3="1.110"}
          else if(D < 0.625) { g3 = 2.0; sg3="10.0"}
          else if(D < 0.8125) { g3 = 1.75; sg3="1.110"}
          else {g3 = 2.25; sg3="10.010"}
          
          if(D < 0.53125) { g4 = 2.25; sg4="10.010"}
          else if(D < 0.625) {g4 = 2.0; sg4="10.0"}
          else if(D < 0.6875) {g4 = 2.25; sg4="10.010"}
          else if(D < 0.75) {g4 = 2.5; sg4="10.10"}
          else if(D < 0.8125) {g4 = 2.75; sg4="10.110"}
          else if(D < 0.9375) { g4 = 3.0; sg4="10.0"}
          else {g4 = 3.5;sg4="11.10"}
          
          if(D < 0.53125) { g5 = 2.75; sg5="10.110"}
          else if(D < 0.59375) {g5 = 2.5; sg5="10.10"}
          else if(D < 0.65625) {g5 = 2.75; sg5="10.110"}
          else if(D < 0.71875) {g5 = 3.0; sg5="11.0"}
          else if(D < 0.75) {g5 = 3.25; sg5="11.010"}
          else if(D < 0.8125) {g5 = 3.5; sg5="11.10"}
          else if(D < 0.875) {g5 = 3.75; sg5="11.110"}
          else if(D < 0.9375) { g5 = 4.0; sg5="100.0"}
          else {g5 = 4.5;sg5="100.10"}
          
          if(D < 0.53125) { g6 = 2.75; sg6="10.110"}
          else if(D < 0.5625) {g6 = 3.0; sg6="11.0"}
          else if(D < 0.625) {g6 = 3.25; sg6="11.010"}
          else if(D < 0.65625) {g6 = 3.5; sg6="11.1"}
          else if(D < 0.71875) {g6 = 3.75; sg6="11.110"}
          else if(D < 0.75) {g6 = 4.0; sg6="100.0"}
          else if(D < 0.8125) {g6 = 4.25; sg6="100.010"}
          else if(D < 0.84375) { g6 = 4.5; sg6="100.10"}
          else if(D < 0.90625) {g6 = 4.75; sg6="100.110"}
          else {g6 = 5.25;sg6="101.010"}
          


	
          f1 = 0.5; sf1="0.1"
          
          if(D < 0.625) { f2 = 0.75; sf2="0.110"}
          else if(D < 0.875) { f2 = 1.0; sf2="1.0"}
          else {f2 = 1.25; sf2="1.010"}
          
          if(D < 0.5625) { f3 = 1.25; sf3="1.01"}
          else if(D < 0.6875) { f3 = 1.5; sf3="1.10"}
          else if(D < 0.875) { f3 = 1.0; sf3="10.0"}
          else {f3 = 2.25; sf3="10.010"}
          
          if(D < 0.625) { f4 = 2.0; sf4="10.0"}
          else if(D < 0.6875) {f4 = 2.25; sf4="10.010"}
          else if(D < 0.8125) { f4 = 2.5; sf4="10.10"}
          else {f4 = 3.0;sf4="11.0"}
          
          if(D < 0.5625) { f5 = 2.5; sf5="10.10"}
          else if(D < 0.625) {f5 = 2.75; sf5="10.110"}
          else if(D < 0.6875) {f5 = 3.0; sf5="11.0"}
          else if(D < 0.75) {f5 = 3.25; sf5="11.010"}
          else if(D < 0.8125) {f5 = 3.5; sf5="11.10"}
          else if(D < 0.875) { f5 = 3.75; sf5="11.110"}
          else {f5 = 4.25;sf5="100.010"}
          
          if(D < 0.5625) { f6 = 3.0; sf6="11.0"}
          else if(D < 0.625) {f6 = 3.25; sf6="11.010"}
          else if(D < 0.6875) {f6 = 3.5; sf6="11.10"}
          else if(D < 0.75) {f6 = 4.0; sf6="100.0"}
          else if(D < 0.8125) { f6 = 4.25; sf6="100.10"}
          else if(D < 0.9375) {f6 = 4.75; sf6="100.110"}
          else {f6 = 5.5;sf6="101.10"}
          
          if(D < 0.5625) { f7 = 3.5; sf7="11.10"}
          else if(D < 0.59375) {f7 = 3.75; sf7="11.110"}
          else if(D < 0.65625) {f7 = 4.0; sf7="100.0"}
          else if(D < 0.71875) {f7 = 4.5; sf7="100.10"}
          else if(D < 0.8125) { f7 = 5.0; sf7="101.0"}
          else if(D < 0.875) { f7 = 5.5; sf7="101.10"}          
          else {f7 = 6.25;sf7="110.010"}
          
        for (i = 0; i < NumDec_8; i++) {
                // "qi" is a horrible misnomer because it's actually
                // q(i + 1).
                
                LessThanF1 = Math.abs(8 * r) < f1
                LessThanF2 = Math.abs(8 * r) < f2
                LessThanF3 = Math.abs(8 * r) < f3
                LessThanF4 = Math.abs(8 * r) < f4
                LessThanF5 = Math.abs(8 * r) < f5
                LessThanF6 = Math.abs(8 * r) < f6
                LessThanF7 = Math.abs(8 * r) < f7

		LessThanG1 = Math.abs(8 * r) < g1
                LessThanG2 = Math.abs(8 * r) < g2
                LessThanG3 = Math.abs(8 * r) < g3
                LessThanG4 = Math.abs(8 * r) < g4
                LessThanG5 = Math.abs(8 * r) < g5
                LessThanG6 = Math.abs(8 * r) < g6

		LessThanH1 = Math.abs(8 * r) < h1
                LessThanH2 = Math.abs(8 * r) < h2
                LessThanH3 = Math.abs(8 * r) < h3
                LessThanH4 = Math.abs(8 * r) < h4
                LessThanH5 = Math.abs(8 * r) < h5

                LessThanK1 = Math.abs(8 * r) < k1
                LessThanK2 = Math.abs(8 * r) < k2
                LessThanK3 = Math.abs(8 * r) < k3
                LessThanK4 = Math.abs(8 * r) < k4
                
                if(form.alpha[0].checked) {
                 if(LessThanK1) { qi = 0;}
                  else if(LessThanK2) {
                      r/D >= 0 ? qi = 1: qi = -1;
                  }
                  else if (LessThanK3) {
                      r/D >= 0 ? qi = 2: qi = -2;
                  }
                  else if (LessThanK4) {
                      r/D >= 0 ? qi = 3: qi = -3;
                  }
                  else {
                      r/D >= 0 ? qi = 4: qi = -4;
                  } 
                }
                else if(form.alpha[1].checked) {
                 if(LessThanH1) { qi = 0;}
                  else if(LessThanH2) {
                      r/D >= 0 ? qi = 1: qi = -1;
                  }
                  else if (LessThanH3) {
                      r/D >= 0 ? qi = 2: qi = -2;
                  }
                  else if (LessThanH4) {
                      r/D >= 0 ? qi = 3: qi = -3;
                  }
                  else if (LessThanH5) {
                      r/D >= 0 ? qi = 4: qi = -4;
                  }
                  else {
                      r/D >= 0 ? qi = 5: qi = -5;
                  } 
                }
                else if(form.alpha[2].checked) {
                 if(LessThanG1) { qi = 0;}
                  else if(LessThanG2) {
                      r/D >= 0 ? qi = 1: qi = -1;
                  }
                  else if (LessThanG3) {
                      r/D >= 0 ? qi = 2: qi = -2;
                  }
                  else if (LessThanG4) {
                      r/D >= 0 ? qi = 3: qi = -3;
                  }
                  else if (LessThanG5) {
                      r/D >= 0 ? qi = 4: qi = -4;
                  }
                  else if (LessThanG6) {
                      r/D >= 0 ? qi = 5: qi = -5;
                  }
                  else {
                      r/D >= 0 ? qi = 6: qi = -6;
                  } 
                }          
                else {
                   if(LessThanF1) { qi = 0;}
                  else if(LessThanF2) {
                      r/D >= 0 ? qi = 1: qi = -1;
                  }
                  else if (LessThanF3) {
                      r/D >= 0 ? qi = 2: qi = -2;
                  }
                  else if (LessThanF4) {
                      r/D >= 0 ? qi = 3: qi = -3;
                  }
                  else if (LessThanF5) {
                      r/D >= 0 ? qi = 4: qi = -4;
                  }
                  else if (LessThanF6) {
                      r/D >= 0 ? qi = 5: qi = -5;
                  }
                  else if (LessThanF7) {
                      r/D >= 0 ? qi = 6: qi = -6;
                  }
                  else {
                      r/D >= 0 ? qi = 7: qi = -7;
                  }
                }

                SumSize = Math.max (OrderOfMagnitude(8 * r),
                                          Math.max(OrderOfMagnitude(D * qi * -1),
                                                     OrderOfMagnitude(8 * r - qi * D)))
                // 1st line
                Middle += "<TR> <TD> 8r<SUB>" + i + "</SUB>"
                if (qi == 0) {
                        Middle += " =&gt; r<sub>" + (i+1) + "</sub>"
                }
                Middle += "<TD>"
                Middle += PrintTwosComp(8 * r, SumSize);
                Middle += "<TD> "
               if(form.alpha[0].checked) {
                if(LessThanK1) {
                   Middle += (r >= 0 ? "r < " + sk1 : "r > " + "-" + sk1);
                }
                else if(LessThanK2) {
                   Middle += (r >= 0 ? sk1 +" <= r < "+sk2 : "-"+sk2 +" < r <= " + "-" + sk1);
                }
                else if(LessThanK3) {
                   Middle += (r >= 0 ? sk2 +" <= r < "+sk3 : "-"+sk3 +" < r <= -"+sk2);
                }
                else if(LessThanK4) {
                   Middle += (r >= 0 ? sk3 +" <= r < "+sk4 : "-"+sk4 +" < r <= " + "-" + sk3);
                }
               }
               if(form.alpha[1].checked) {
                if(LessThanH1) {
                   Middle += (r >= 0 ? "r < " + sh1 : "r > " + "-" + sh1);
                }
                else if(LessThanH2) {
                   Middle += (r >= 0 ? sh1 +" <= r < "+sh2 : "-"+sh2 +" < r <= " + "-" + sh1);
                }
                else if(LessThanH3) {
                   Middle += (r >= 0 ? sh2 +" <= r < "+sh3 : "-"+sh3 +" < r <= -"+sh2);
                }
                else if(LessThanH4) {
                   Middle += (r >= 0 ? sh3 +" <= r < "+sh4 : "-"+sh4 +" < r <= " + "-" + sh3);
                }
                else if(LessThanH5) {
                   Middle += (r >= 0 ? sh4 +" <= r < "+sh5 : "-"+sh5 +" < r <= -"+sh4);
                }
               }
               if(form.alpha[2].checked) {
                if(LessThanG1) {
                   Middle += (r >= 0 ? "r < " + sg1 : "r > " + "-" + sg1);
                }
                else if(LessThanG2) {
                   Middle += (r >= 0 ? sg1 +" <= r < "+sg2 : "-"+sg2 +" < r <= " + "-" + sg1);
                }
                else if(LessThanG3) {
                   Middle += (r >= 0 ? sg2 +" <= r < "+sg3 : "-"+sg3 +" < r <= -"+sg2);
                }
                else if(LessThanG4) {
                   Middle += (r >= 0 ? sg3 +" <= r < "+sg4 : "-"+sg4 +" < r <= " + "-" + sg3);
                }
                else if(LessThanG5) {
                   Middle += (r >= 0 ? sg4 +" <= r < "+sg5 : "-"+sg5 +" < r <= -"+sg4);
                }
                else if(LessThanG6) {
                   Middle += (r >= 0 ? sg5 +" <= r < "+sg6 : "-"+sg6 +" < r <= " + "-" + sg5);
                }
               }               
              
              if(form.alpha[3].checked){
                if(LessThanF1) {
                   Middle += (r >= 0 ? "r < " + sf1 : "r > " + "-" + sf1);
                }
                else if(LessThanF2) {
                   Middle += (r >= 0 ? sf1 +" <= r < "+sf2 : "-"+sf2 +" < r <= " + "-" + sf1);
                }
                else if(LessThanF3) {
                   Middle += (r >= 0 ? sf2 +" <= r < "+sf3 : "-"+sf3 +" < r <= -"+sf2);
                }
                else if(LessThanF4) {
                   Middle += (r >= 0 ? sf3 +" <= r < "+sf4 : "-"+sf4 +" < r <= " + "-" + sf3);
                }
                else if(LessThanF5) {
                   Middle += (r >= 0 ? sf4 +" <= r < "+sf5 : "-"+sf5 +" < r <= -"+sf4);
                }
                else if(LessThanF6) {
                   Middle += (r >= 0 ? sf5 +" <= r < "+sf6 : "-"+sf6 +" < r <= " + "-" + sf5);
                }
                else if(LessThanF7) {
                   Middle += (r >= 0 ? sf6 +" <= r < "+sf7 : "-"+sf7 +" < r <= -"+sf6);
                }
               }
               
               
               

                // Middle += " (r = " + r + ") "
                // if (LessThanHalf) Middle += " (LessThanHalf) "
                // if (EqualsHalf) Middle += " (EqualsHalf) "
                Middle += "    set q<SUB>" + (i + 1) + "</SUB> = ";
                Q += Math.pow(8, -i - 1) * qi;
                Middle += qi + "\n";

                // 2nd line - printed only if qi is 1 or -1
                if (qi != 0) {
                        Middle += "<TR> <TD> Add "
                        if (qi >= 1) {Middle += "-";}
                        Middle += Math.abs(qi) +"D <TD> + ";
                        Middle += PrintTwosComp(D * qi * -1, SumSize);
                        Middle += "<TD>\n"
                        Middle += MakeLine(NumCols + 3);
                }
                r = RoundOff(8 * r - qi * D)

                // 3rd line - printed only if qi is 1 or -1
                if (qi != 0) {
                        Middle += "<TR> <TD> r<SUB>" + (i + 1) + "</SUB> "
                // if (qi == 0) {Middle += "= 2r<sub>" + i + "</sub> "}
                        Middle += "<TD> " + PrintTwosComp(r, SumSize) + "<TD>"
                }
        }

        Middle += "</TABLE> <P>\n";
        Middle += "Q = " + TwosComp(Q, 0) + " = " + Q + "<BR>\n"
        if (r/D < 0) { // if sign is different
                ulp = Math.pow(8, -NumDec_8)
                Middle += "R<i><sub>corrected</sub></i> = r<sub>" + i + "</sub>"
                if (Q/D > 0 || ZeroRem) {
                        Middle += " + D = " + TwosComp(r, 0) + " + " +
                        TwosComp(D, 0) + " = " + TwosComp(r + D, 0) + " = " +
                        (r + D) + "<BR>\n"
                        Middle += "Q<i><sub>corrected</sub></i> = Q - <i>ulp</i> = " +
                        TwosComp(Q, 0) + " - " + TwosComp(ulp, 0) + " = " +
                        TwosComp(Q - ulp, 0) + " = " + (Q - ulp)
                } else {
                        Middle += " - D = " + TwosComp(r, 3) + " - " +
                        TwosComp(D, 0) + " = " + TwosComp(r - D, 0) + " = " +
                        (r - D) + "<BR>\n"
                        Middle += "Q<i><sub>corrected</sub></i> = Q + <i>ulp</i> = " +
                        TwosComp(Q, 0) + " + " + TwosComp(ulp, 3) + " = " +
                        TwosComp(Q + ulp, 0) + " = " + (Q + ulp)
                }

        }
        
        Bottom = "</BODY> </HTML>";

     if (NotBinary == true) {Middle = PrintError("At least one non-binary number")}
     else {
        if (NumDecimals < 0) {Middle = PrintError("Overflow")}
        if (xlargerd7) {Middle = PrintError("The absolute value of X cannot be larger than D while choosing alpha=7")}
        if (xlargerd6) {Middle = PrintError("The absolute value of X cannot be larger than 6/7 D while choosing alpha=6")}
        if (xlargerd5) {Middle = PrintError("The absolute value of X cannot be larger than 5/7 D while choosing alpha=5")}
        if (xlargerd4) {Middle = PrintError("The absolute value of X cannot be larger than 4/7 D while choosing alpha=4")}
                if (D == 0) {Middle = PrintError("Divide by zero")}
        if( D < 0.5 || D >=1.0)
             {Middle = PrintError("Divisor should be in the range [0.5, 1).")}; 
     }

    if( (NumBits % 2) == 1) 
             {Middle = PrintError("The number of bits should be odd.")}; 

        parent.frames[1].document.open()
        parent.frames[1].document.write(TheTop);
        parent.frames[1].document.write(Middle);
        parent.frames[1].document.write(Bottom);
        parent.frames[1].document.close()

}

function Display(form) {

	TheTop = "<HTML><HEAD><TITLE>Tablet</TITLE></HEAD><BODY bgcolor=white>"

	if(form.alpha[0].checked) {
          Middle = "<IMG SRC = ./alpha4.gif>"
          Middle += "<IMG SRC = ./alpha4neg.gif>"
	}
	if(form.alpha[1].checked) {
          Middle = "<IMG SRC = ./alpha5.gif>"
          Middle += "<IMG SRC = ./alpha5neg.gif>"
        }
        if(form.alpha[2].checked) {
          Middle = "<IMG SRC = ./alpha6.gif>"
          Middle += "<IMG SRC = ./alpha6neg.gif>"
        }
        if(form.alpha[3].checked) {
          Middle = "<IMG SRC = ./alpha7.gif>"
          Middle += "<IMG SRC = ./alpha7neg.gif>"
        }

	Bottom = "</BODY> </HTML>";

	parent.frames[1].document.open()
        parent.frames[1].document.write(TheTop);
        parent.frames[1].document.write(Middle);
        parent.frames[1].document.write(Bottom);
        parent.frames[1].document.close()
}

</SCRIPT>
</HEAD>


<BODY bgcolor="#FFFF7C">

<CENTER> <H3> SRT Radix-8 Division</H3>

<p><FORM>
<p><i>Alpha: <EM>4</EM> <INPUT type="radio" name="alpha" value="4">
	     <EM>5</EM> <INPUT type="radio" name="alpha" value="5">
	     <EM>6</EM> <INPUT type="radio" name="alpha" value="6">
             <EM>7</EM> <INPUT type="radio" name="alpha" value="7" checked>
</i><p>
<P>
<EM>bin</EM> <INPUT type="radio" name="Base" value="Binary">
<EM>dec</EM> <INPUT type="radio" name="Base" value="Decimal" checked>
<P>

X: <INPUT type="text" name="X" size=16>
<P>
D: <INPUT type="text" name="D" size=16>
<P>

Number of bits (odd):<BR>
<INPUT type="text" name="NumBits" value="9" size=12>
<P>
<INPUT type="button" value="Compute" onClick="SRT(this.form)">
<P>
<INPUT type="button" value="Show PD Plots" onClick="Display(this.form)">
<P>


<p>
<CENTER>
<INPUT TYPE="Reset"  VALUE="   Reset   " onClick=parent.frames[1].location.href="../tablet.html">
</CENTER>
</P>

<p>
<CENTER>
<INPUT TYPE="button"  VALUE="   Help    " onClick=parent.frames[1].location.href="help.html">
</CENTER>
</P>





</CENTER>
</FORM>

</BODY>
</HTML>
