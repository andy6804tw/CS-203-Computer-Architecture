<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Cache Simulation</title>
</head>

<body>

<p align="center"><font color="#FF0000" size="5"><span style="font-family: Comic Sans MS; mso-fareast-font-family: SimSun; mso-bidi-font-family: Times New Roman; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA"><b>Cache
Organization &amp; Associativity</b></span></font></p>
<p align="left"><span style="font-size:12.0pt;font-family:&quot;Comic Sans MS&quot;;
mso-fareast-font-family:SimSun;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA">In
this lab you will get introduced to <font color="#008000">sim-cache</font>
simulator. You will use this simulator to do cache simulation with various
configurations.</span></p>
<p align="left"><span style="font-size:12.0pt;font-family:&quot;Comic Sans MS&quot;;
mso-fareast-font-family:SimSun;mso-bidi-font-family:&quot;Times New Roman&quot;;
color:red;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:
AR-SA">Quick fact about</span><span style="font-size:12.0pt;font-family:&quot;Comic Sans MS&quot;;
mso-fareast-font-family:SimSun;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA"> <span style="color:green">sim-outorder</span>
<span style="color:red">simulator<br>
<br>
</span></span><span style="mso-spacerun: yes; font-size: 12.0pt; font-family: Comic Sans MS; mso-fareast-font-family: Times New Roman; mso-bidi-font-family: Times New Roman; mso-ansi-language: EN-US; mso-fareast-language: EN-US; mso-bidi-language: AR-SA">It
is a</span><span style="font-size:12.0pt;font-family:&quot;Comic Sans MS&quot;;
mso-fareast-font-family:&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA"><span style="mso-spacerun:yes">&nbsp;</span>memory
system simulator. This simulator can emulate a system with multiple levels of
instruction and data caches, each of which can be configured for different sizes
and organizations. This simulator is ideal for fast cache simulation if the
effect of cache performance on execution time is not needed.</span></p>
<p class="MsoNormal"><span style="font-family:&quot;Comic Sans MS&quot;">All the
simulators including <span style="color:green">sim-cache</span> are available in
the <span style="color:#993300">home/simplesim-3.0</span> directory.<o:p>
</o:p>
</span></p>
<p class="MsoNormal"><span style="font-family:&quot;Comic Sans MS&quot;"><o:p>
&nbsp;Go to <span style="color:#993300">home/simplesim-3.0</span> directory and
type the following to seek help about <span style="color:green">sim-cache</span>.
<o:p>
</o:p>
</span></p>
<p class="MsoNormal"><span style="font-family:&quot;Comic Sans MS&quot;;color:#993300">&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; home/simplesim-3.0</span><span style="font-family:&quot;Comic Sans MS&quot;">$<span style="color:#003366">./sim-cache
–h<o:p>
</o:p>
</span></span></p>
<p class="MsoNormal"><span style="font-family:&quot;Comic Sans MS&quot;;color:#003366"><o:p>
&nbsp;</span><span style="font-family:&quot;Comic Sans MS&quot;">Help can also
be invoked just by typing simulator name without any arguments.<o:p>
</o:p>
</span></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="font-size: 12.0pt; font-family: Comic Sans MS; mso-fareast-font-family: SimSun; mso-bidi-font-family: Times New Roman; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA">Make
sure that the simulator is configured as <font color="#FF00FF">PISA Simulator</font>,
perform the following exercises on <font color="#008080">test-math </font>
program<br>
available in <span style="font-size:12.0pt;font-family:&quot;Comic Sans MS&quot;;
mso-fareast-font-family:&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
color:#993300;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:
AR-SA">home/simplesim-3.0/tests-pisa/bin/ </span><span style="font-size:
12.0pt;font-family:&quot;Comic Sans MS&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-US;mso-fareast-language:
EN-US;mso-bidi-language:AR-SA">directory</span>.</span></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="font-size: 12.0pt; font-family: Comic Sans MS; mso-fareast-font-family: SimSun; mso-bidi-font-family: Times New Roman; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA">1)&nbsp;&nbsp;
</span><font face="Comic Sans MS">Use a single run of <font color="#008000">sim-cache</font>
to simulate the performance of the cache under the following conditions:</font></p>
<ul>
  <li><font face="Comic Sans MS">least-recently-used (LRU) replacement policy</font>
  <li><font face="Comic Sans MS">32 to 512 sets</font>
  <li><font face="Comic Sans MS">1-way to 8-way associativity</font>
  <li><font face="Comic Sans MS">16-byte cache lines (block size)</font></li>
</ul>
<font face="Comic Sans MS">Do this two times, once each for a <font color="#000080">data-only
cache</font> and an <font color="#000080">instruction-only cache</font>. Please
copy the configuration files from
here&nbsp;&nbsp;&nbsp;&nbsp;<a href="lab1_cache_1a.cfg">lab1_cache_1a.cfg</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="lab1_cache_5F2a.cfg">lab1_cache_2a.cfg</a>&nbsp;&nbsp;and modify them to conduct the following experiments. Fill in the tables 1 and 2
below</font>
<p></p>
<table border="1" width="100%">
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#008080">Miss
      Ratio (I-Cache)</font></td>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#008080">1-way</font></td>
    <td width="17%" align="center"><font face="Comic Sans MS" color="#008080">2-way</font></td>
    <td width="17%" align="center"><font face="Comic Sans MS" color="#008080">4-way</font></td>
    <td width="17%" align="center"><font face="Comic Sans MS" color="#008080">8-way</font></td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#008080">32
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#008080">64
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#008080">128
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#008080">256
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#008080">512
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table border="1" width="100%">
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#0000FF">Miss
      Ratio (D-Cache)</font></td>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#0000FF">1-way</font></td>
    <td width="17%" align="center"><font face="Comic Sans MS" color="#0000FF">2-way</font></td>
    <td width="17%" align="center"><font face="Comic Sans MS" color="#0000FF">4-way</font></td>
    <td width="17%" align="center"><font face="Comic Sans MS" color="#0000FF">8-way</font></td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#0000FF">32
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#0000FF">64
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#0000FF">128
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#0000FF">256
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
  <tr>
    <td width="16%" align="center"><font face="Comic Sans MS" color="#0000FF">512
      sets</font></td>
    <td width="16%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
    <td width="17%">&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p><font face="Comic Sans MS">Now use MATLAB or EXCEL to plot the results of the
simulations. For each of the simulations (data, instruction), plot the miss
ratio versus associativity for each number of sets. Using markers, show the
points on the curves which correspond to total cache sizes of 1 Kbytes, 2
Kbytes, 4 Kbytes and 8 K bytes (total cache size = sets * block size *
associativity). For each simulation, you should produce something that resembles
the plot below. In the plot results are shown from the instruction cache simulation.</font></p>
<p>&nbsp;&nbsp;&nbsp; <img border="0" src="lab1cachesfig1.gif" width="711" height="554"></p>
<p><font face="Comic Sans MS">Now answer the following questions based on the
above results.</font></p>
<font face="Comic Sans MS">Q 1) For a given number of sets, what effect does
    increasing associativity have on the miss ratio?</font>
<p><font face="Comic Sans MS">Q 2) For a given associativity, what is the effect
    of increasing the number of sets?</font>
<p><font face="Comic Sans MS">Q 3) For a given cache size, how does the miss ratio
    change when going from an associativity of one to two to four? Explain.</font>
<p><font face="Comic Sans MS">Q 4) If you were to design a Instruction cache, limited to
    a total cache size of 4 Kbytes, which cache organization would you choose,
    based solely on performance?</font>
<p><font face="Comic Sans MS">Q 5) If you were to design a data cache, limited to
    a total cache size of 4 Kbytes, which cache organization would you choose,
    based solely on performance?</font>
<p><br>
<font face="Comic Sans MS" color="#FF0000">Bonus Part</font></p>
<p><font face="Comic Sans MS">Repeat part 1) for only Instruction cache except that change the replacement
scheme from LRU to Random</font>. <font face="Comic Sans MS">Plot the results as
shown in the above figure. You don't need to answer the questions in part 1).</font></p>

</body>

</html>
