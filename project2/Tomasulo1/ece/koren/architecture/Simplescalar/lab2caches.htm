<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Cache Simulation with Unified</title>
</head>

<body>

<p align="center"><font color="#FF0000" size="5"><span style="font-family: Comic Sans MS; mso-fareast-font-family: SimSun; mso-bidi-font-family: Times New Roman; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA"><b>Cache
Organization with Unified/Separate Instruction and Data Caches</b></span></font></p>
<p align="left"><font face="Comic Sans MS" size="3">In this lab, you will
investigate the performance of cache with unified/separate instruction and data
caches (see Figure 1)&nbsp; while executing <font color="#008080">test-math</font> program.</font></p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>
<blockquote>
  <blockquote>
    <blockquote>
<p align="left"><img border="0" src="lab2cachesfig1.gif" width="536" height="300"></p>
    </blockquote>
  </blockquote>
</blockquote>
<p align="left"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(Fig&nbsp;&nbsp;&nbsp; 1)</b></p>

<p align="left">&nbsp;</p>

<p align="left"><font face="Comic Sans MS">1)&nbsp;&nbsp; Use <font color="#008000"> sim-cache</font> to
simulate the performance of the cache under the following conditions:</font></p>

<ul>
  <li>
    <p style="MARGIN-BOTTOM: 0cm"><font face="Comic Sans MS">least-recently-used
    (LRU) replacement policy</font></p>
  <li>
    <p style="MARGIN-BOTTOM: 0cm"><font face="Comic Sans MS">16-byte cache lines
    (block size)</font></p>
  </li>
  <li>
    <p style="MARGIN-BOTTOM: 0cm"><font face="Comic Sans MS">Sets/associativity
    combinations: 128/1, 128/2, 128/4, 2048/1, 2048/2, 2048/4</font></p>
  <li>
    <p><font face="Comic Sans MS">Only L1 caches will be used in this problem;
    L2 caches will be assumed not present</font></p>
  </li>
</ul>
<p><font face="Comic Sans MS">To do this, specify a split cache configuration
that has instruction and data caches that are half the size of the unified
cache, for each of the prescribed sets/associativity combinations (i.e. a
128-set unified configuration would be compared to a 64-set instruction/data
caches in a split configuration).</font></p>
<p><font face="Comic Sans MS">To compare the performance of the split cache to
the unified cache, one must compute the overall miss ratio of the split cache.
To do this, one must take note of the total number of accesses to each of the
instruction and data caches, and the number of misses. The simulator will give
you the miss rates for the instruction and data caches, which should be <font color="#008080">(instruction
misses)/(instruction accesses)</font> and <font color="#0000FF">(data
misses)/(data accesses)</font> respectively. The effective combined cache miss
ratio can be computed as: (<font color="#008080">instruction misses</font> + <font color="#0000FF">data
misses</font>)/ (<font color="#008080">instruction accesses</font> + <font color="#0000FF">data
accesses</font>). The number of accesses to each cache should be the same for
each configuration; you need only record this once. The number of misses must be
recorded for each configuration. Fill Table 1 below.</font></p>
<p>&nbsp;</p>
<table border="1" width="100%">
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">Sets/Assoc</font></td>
    <td width="20%" align="center"><font face="Comic Sans MS">I-Cache Miss No&nbsp;
      (N/2 sets)+ </font></td>
    <td width="20%" align="center"><font face="Comic Sans MS">D-Cache Miss No
      (N/2 sets)</font></td>
    <td width="20%" align="center"><font face="Comic Sans MS">Effective Combined
      Cache Miss Rate*</font></td>
    <td width="20%" align="center"><font face="Comic Sans MS">Unified Cache Miss
      Rate</font></td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">128/1</font></td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">128/2</font></td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">128/4</font></td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">2048/1</font></td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">2048/2</font></td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">2048/4</font></td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
    <td width="20%">&nbsp;</td>
  </tr>
</table>
<p><sup><font size="3" face="Comic Sans MS">+ </font></sup><font size="3" face="Comic Sans MS">The
number N is the number of sets in the unified cache, the split cache consists of
two caches of N/2 sets.</font></p>
<p><font size="3" face="Comic Sans MS">* effective combined cache miss rate = (<font color="#0000FF">data
misses </font>+ <font color="#008080">inst misses</font>)/((<font color="#0000FF">data
accesses</font> + <font color="#008080">inst accesses</font>)</font></p>
<p align="left">&nbsp;</p>

<p align="left"><font size="3" face="Comic Sans MS">Use MATLAB (or EXCEL) to
create two plots: one for 64 set split vs. 128 set unified cache performance,
and another for 1024 set split vs. 2048 set unified cache performance.&nbsp; On
each plot, use the sim-cache data in the above table to graph miss ratio vs.
associativity.&nbsp; On each plot, there should be two curves:</font></p>

<p align="left"><font size="3" face="Comic Sans MS">1) effective combined cache
miss rate, and <br>
2) unified cache miss rate.</font></p>

<p align="left">&nbsp;</p>

<p align="left"><font size="3" face="Comic Sans MS" color="#FF0000">Bonus part<br>
<br>
</font><font size="3" face="Comic Sans MS">Measure CPI for the split and unified
caches for the configurations in table 1 above. Note that you will have to use<br>
<font color="#008000">sim-outorder</font> with configuration file <font color="#000080">default.cfg</font>
modified according to the configurations in table 1. Fill Table 2 below.</font></p>

<p align="left">&nbsp;</p>

<table border="1" width="100%">
  <tr>
    <td width="33%">
      <p align="center"><font face="Comic Sans MS">Sets/Assoc</font></td>
    <td width="33%" align="center"><font face="Comic Sans MS">&nbsp;&nbsp; CPI
      Unified Cache</font></td>
    <td width="34%" align="center"><font face="Comic Sans MS">&nbsp;CPI Split
      Cache</font></td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">128/1</font></td>
    <td width="33%">&nbsp;</td>
    <td width="34%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">128/2</font></td>
    <td width="33%">&nbsp;</td>
    <td width="34%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">128/4</font></td>
    <td width="33%">&nbsp;</td>
    <td width="34%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">2048/1</font></td>
    <td width="33%">&nbsp;</td>
    <td width="34%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">2048/2</font></td>
    <td width="33%">&nbsp;</td>
    <td width="34%">&nbsp;</td>
  </tr>
  <tr>
    <td width="20%" align="center"><font face="Comic Sans MS">2048/4</font></td>
    <td width="33%">&nbsp;</td>
    <td width="34%">&nbsp;</td>
  </tr>
</table>
<p align="left">&nbsp;</p>

<p align="left"><font size="3" face="Comic Sans MS">Now plot using MATLAB or
EXCEL, CPI Vs Associativity for 128 sets and 2048 sets for the unified and split
cache cases.</font></p>

<p align="left">&nbsp;</p>

</body>

</html>
