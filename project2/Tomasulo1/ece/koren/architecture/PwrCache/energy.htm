<html><head><title>Form Example</title>
<SCRIPT LANGUAGE="JavaScript1.2" SRC="graph.js"></SCRIPT>
<script>

function compute_Ebit(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req)
{


//total number of hits
var Nhit = Nr_hit + Nw_hit;

//Total number of misses
var Nmiss = Nr_miss + Nw_miss;

//Total number of cache accesses
var CA = Nhit + Nmiss;

//Total number of sets
S = Math.floor(D / (L*m));

//Total number of rows
Nrows = S;

//Total number of columns
Ncols = m*(8*L + T + St);

//GOAL 1: ESTIMATION OF ENERGY DISSIPATED IN THE BIT LINES.
var Nbitlines = (8*m*L + m*T + St)*2;

var Nbit_pr = (Nhit + Nmiss)*Nbitlines*0.5;

var femto = Math.pow(10,-15);

var Cbit_pr = 5.5624*Nrows*femto;

var Cbit_rw = Cbit_pr + 217.58*femto;

var Nbit_r =  0.5*(Nhit + Nmiss)*Nbitlines;
       
var Wavg_data = 19;

var Nbit_w =  0.5*Nr_miss*(T + St + 8*L)*2 + 0.5*Nw_hit*(St + Wavg_data)*2

//total gate capacitance
var gate_cap = (124.8 + 124.8 + 92.78)*femto;

var factor1_2 = Nbit_pr*Cbit_pr + Cbit_rw*(Nbit_r + Nbit_w) + Ncols*CA*gate_cap;

var Vddsq = Math.pow(Vdd,2);

//Final calculation for Energy dissipated in bit lines

Ebit = 0.5*Vddsq*factor1_2 ;

return Ebit;

}


function compute_Eword(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req)
{


//total number of hits
var Nhit = Nr_hit + Nw_hit;

//Total number of misses
var Nmiss = Nr_miss + Nw_miss;

//Total number of cache accesses
var CA = Nhit + Nmiss;

//Total number of sets
S = Math.floor(D / (L*m));

//Total number of rows
Nrows = S;

//Total number of columns
Ncols = m*(8*L + T + St);

//GOAL 1: ESTIMATION OF ENERGY DISSIPATED IN THE BIT LINES.
var Nbitlines = (8*m*L + m*T + St)*2;

var Nbit_pr = (Nhit + Nmiss)*Nbitlines*0.5;

var femto = Math.pow(10,-15);

var Cbit_pr = 5.5624*Nrows*femto;

var Cbit_rw = Cbit_pr + 217.58*femto;

var Nbit_r =  0.5*(Nhit + Nmiss)*Nbitlines;
       
var Wavg_data = 19;

var Nbit_w =  0.5*Nr_miss*(T + St + 8*L)*2 + 0.5*Nw_hit*(St + Wavg_data)*2

//total gate capacitance

var Cwordline = (6.52*Ncols + 570.787)*femto;

var gate2_cap = Cwordline / Ncols;

var Vddsq = Math.pow(Vdd,2);

//Final calculation for Energy dissipated in bit lines
var Eword = Vddsq*CA*Ncols*gate2_cap;

return Eword;

}

function compute_Eainput(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req)
{


//total number of hits
var Nhit = Nr_hit + Nw_hit;

//Total number of misses
var Nmiss = Nr_miss + Nw_miss;

//Total number of cache accesses
var CA = Nhit + Nmiss;

//Total number of sets
S = Math.floor(D / (L*m));

//Total number of rows
Nrows = S;

//Total number of columns
Ncols = m*(8*L + T + St);

//GOAL 1: ESTIMATION OF ENERGY DISSIPATED IN THE BIT LINES.
var Nbitlines = (8*m*L + m*T + St)*2;

var Nbit_pr = (Nhit + Nmiss)*Nbitlines*0.5;

var femto = Math.pow(10,-15);

var Cbit_pr = 5.5624*Nrows*femto;

var Cbit_rw = Cbit_pr + 217.58*femto;

var Nbit_r =  0.5*(Nhit + Nmiss)*Nbitlines;
       
var Wavg_data = 19;

var Nbit_w =  0.5*Nr_miss*(T + St + 8*L)*2 + 0.5*Nw_hit*(St + Wavg_data)*2;

var Nainput = 0.5*CA*Wad_bus;

var Cin_dec = 3.12*femto;

var Ca_wire = 993.6*femto;

var factor3 = (m+1)*2*S*Cin_dec + Ca_wire ;

var Vddsq = Math.pow(Vdd,2);

//Final calculation for Energy dissipated in bit lines

Eainput = 0.5*Vddsq*Nainput*factor3 ;


return Eainput;

}

function compute_Eop(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req)
{

//total number of hits
var Nhit = Nr_hit + Nw_hit;

//Total number of misses
var Nmiss = Nr_miss + Nw_miss;

//Total number of cache accesses
var CA = Nhit + Nmiss;

//Total number of sets
S = Math.floor(D / (L*m));

//Total number of rows
Nrows = S;

//Total number of columns
Ncols = m*(8*L + T + St);

//GOAL 1: ESTIMATION OF ENERGY DISSIPATED IN THE BIT LINES.
var Nbitlines = (8*m*L + m*T + St)*2;

var Nbit_pr = (Nhit + Nmiss)*Nbitlines*0.5;

var femto = Math.pow(10,-15);

var Cbit_pr = 5.5624*Nrows*femto;

var Cbit_rw = Cbit_pr + 217.58*femto;

var Nbit_r =  0.5*(Nhit + Nmiss)*Nbitlines;
       
var Wavg_data = 19;

var Nbit_w =  0.5*Nr_miss*(T + St + 8*L)*2 + 0.5*Nw_hit*(St + Wavg_data)*2

//total gate capacitance

var Cwordline = (6.52*Ncols + 570.787)*femto;

var gate2_cap = Cwordline / Ncols;

var Vddsq = Math.pow(Vdd,2);

	if(document.forms[0].cache_type.options.selectedIndex == 0)
	{
		//alert('write back cache selected');
		var Nout_a2m = 0.5*(Nr_miss + Nw_miss + Wbk_req)*Wad_bus ;
		
		var Nout_d2m = (0.5*Nw_miss*Wavg_data) + (0.5*Wbk_req*8*L);
		
	}
	else
	{
		//alert('write through cache selected');
		var Nout_a2m = 0.5*(Nr_miss + Nw_hit + Nw_miss)*Wad_bus ;
		
		var Nout_d2m = 0.5*(Nw_hit + Nw_miss)*Wavg_data ;
		

	}


	if(document.forms[0].cache_location.options.selectedIndex == 0)
	{
		//alert('on chip cache selected');
		var C_out = 0.5*Math.pow(10,-12);
		
		var Nout_d2c = 0.5*(Nr_hit + Nr_miss)*19;
		
		var Nout_a2c = Nout_d2c ;

	}
	else
	{
		//alert('off chip cache selected');
		var C_out = 20*Math.pow(10,-12);
		
		var Nout_d2c = 0.5*(Nr_hit + Nr_miss)*8*L ;
		
		var Nout_a2c = Nout_d2c ;

}

var Ea_op = 0.5*Vddsq*(Nout_a2m*C_out + Nout_a2c*C_out);

var Ed_op = 0.5*Vddsq*(Nout_d2m*C_out + Nout_d2c*C_out);

var Eoutput = Ea_op + Ed_op;

return Eoutput;

}

</script></head>

<body>
<h2><center>Estimation of Cache Energy dissipation </center></h2><br>
Enter the following information. When you press the Calculate button,
the various values of cache energy dissipation can be obtained from the
"Results" section. Also, a graphical representation of the same is
displayed in a supplementary window.Default values are supplied for user convenience.<br><br>

<form method="post">
<table border="1">
<tbody><tr><td>Supply voltage (Volts):</td><td><input size="10" name="sup_volt" type="text" value ="3.3"></td></tr>
<tr><td>Associativity of cache:</td><td><input size="10" name="associativity" type="text" value ="4"></td></tr>
<tr><td>Total Data capacity of cache(BYTES):</td><td><input size="10" name="cache_cap" type="text" value ="32000"></td></tr>
<tr><td>Tag size(in bits):</td><td><input size="10" name="tag_size" type="text" value = "4"></td></tr>
<tr><td>Line Size(in BYTES):</td><td><input size="10" name="line_size" type="text" value = "16"></td></tr>
<tr><td>Total number of memory accesses:</td><td><input size = "10" name = "mem_acc" type = "text" value = "1000"></td></tr>
<tr><td>Percentage of read accesses:</td><td><input size = "10" name = "p_rd_acc" type = "text" value = "75"></td></tr>
<tr><td>Percentage of read hits:</td><td><input size="10" name="read_hits" type="text" value = "75"></td></tr>
<tr><td>Percentage of write hits:</td><td><input size="10" name="write_hits" type="text" value = "75"></td></tr>
<tr><td>Write back requests(% of writes):</td><td><input size="10" name="write_back_req" type="text" value = "10"></td></tr>



<tr><td>Select Type of Cache:</td>
<td><select name="cache_type"><option>write back</option><option>write through</option></select></td></tr>

<tr><td>Select Location of Cache:</td>
<td><select name="cache_location"><option>On Chip</option><option>Off Chip</option></select></td></tr>

</tbody></table>
<input value="Calculate" onclick="{
var Vdd = parseFloat(document.forms[0].sup_volt.value);		//supply voltage
if ((Vdd < 3) || (Vdd > 5))
{
alert('Please enter a reasonable value for source voltage');
alert('Default value of 3.3 V is used for calculations');
document.forms[0].sup_volt.value = 3.3;
}
var m = parseInt(document.forms[0].associativity.value);	//associativity of cache
var D = parseInt(document.forms[0].cache_cap.value);		//total cache capacity
var T = parseInt(document.forms[0].tag_size.value);			//tag size
var L = parseInt(document.forms[0].line_size.value);		//line size

var St = parseInt('2');	//number of status bits
var mem = parseInt(document.forms[0].mem_acc.value); //total number of memory accesses

var p_rd_acc = parseInt(document.forms[0].p_rd_acc.value); //percentage of read accesses
var rd_acc = p_rd_acc*(mem/100); //actual number of read accesses
var p_rd_hits = parseInt(document.forms[0].read_hits.value); //percentage of read hits
var Nr_hit = p_rd_hits*(rd_acc/100); //number of read hits
var Nr_miss = rd_acc - Nr_hit ; //number of read misses

var p_wr_acc = 100-p_rd_acc; //percentage of write accesses
var wr_acc = p_wr_acc*(mem/100); //actual number of write accesses
var p_wr_hits = parseInt(document.forms[0].write_hits.value); //percentage of write hits
var Nw_hit = p_wr_hits*(wr_acc/100); //number of write hits
var Nw_miss = wr_acc - Nw_hit; //number of write misses

var Wad_bus = parseInt('32');	//width of address bus

var Wbk_req = (parseInt(document.forms[0].write_back_req.value))*(wr_acc/100);	 //number of write back requests



Ebit = compute_Ebit(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req);
document.forms[1].e_bit.value = Ebit.toPrecision(5);
//Ebit = Ebit.toPrecision(5);

Eword = compute_Eword(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req);
document.forms[1].e_word.value = Eword.toPrecision(5);
//Eword = Eword.toPrecision(5);

Eainput = compute_Eainput(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req);
document.forms[1].e_add.value = Eainput.toPrecision(5);
//Eainput = Eainput.toPrecision(5);

Eoutput = compute_Eop(Vdd,m,D,T,L,St,Nr_hit,Nr_miss,Nw_hit,Nw_miss,Wad_bus,Wbk_req);
document.forms[1].e_out.value = Eoutput.toPrecision(5);
//Eoutput = Eoutput.toPrecision(5);

Etotal = Ebit + Eword + Eainput + Eoutput ;
document.forms[1].e_total.value = Etotal.toPrecision(5);


var h = new Graph(400,500,false);
h.bgColor = '#DDDDDD';
h.setLegend('Dissipation in Bit lines','Dissipation in word lines','Dissipation in address input lines','Dissipation in output lines','Total Dissipation');
h.addRow(Ebit);
h.addRow(Eword);
h.addRow(Eainput);
h.addRow(Eoutput);
h.addRow(Etotal);

h.title ='Total Energy dissipation '+ (Etotal*1e6).toPrecision(5) + ' micro Joule' ;

h.yLabel = 'Energy Dissipation' ;

h.build();

}" type="button">
<INPUT TYPE = "RESET">

</form>


<h2> Results</h2>
<form>
<table border="1">
<tbody><tr><td>Energy dissipated in bit lines</td><td><input size="30" name="e_bit" type="text">Joule</td></tr>
<tr><td>Energy dissipated in word lines</td><td><input size="30" name="e_word" type="text">Joule</td></tr>
<tr><td>Energy dissipated in address input lines</td><td><input size="30" name="e_add" type="text">Joule</td></tr>
<tr><td>Energy dissipated in output lines</td><td><input size="30" name="e_out" type="text">Joule</td></tr>
<tr><td>Total Energy dissipated in cache </td><td><input size="30" name="e_total" type="text">Joule</td></tr>
</tbody></table>
</form>


</body></html>