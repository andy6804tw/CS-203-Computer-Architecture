<html>
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="matrix.js">
</SCRIPT>

<script language="JavaScript">

function EditMatrix(){
    if (parent.Right_Matrix.UI_window == null || parent.Right_Matrix.UI_window.closed){
        window_width = parent.Right_Matrix.display_size * 15 * 10;
        if (window_width > screen.width-50){
            window_width = screen.width-50;
        }
        window_height = parent.Right_Matrix.display_size * 50;
        if (window_height > screen.height-50){
            window_height = screen.height-50;
        } 

        parent.Right_Matrix.UI_window = window.open("about:blank",'right_edit_window',
                    'width=' + window_width + ',height=' + window_height 
                     + ',toolbar=0,scrollbars=1,resizable=1,left=40,top=40');
        create_UI("parent.Right_Matrix", parent.Right_Matrix.UI_window.document);
        parent.control_frame.change_simulation_state("MODIFIED");
    }
    else {
        parent.Right_Matrix.UI_window.focus();
    }
}


function CloseUI(){
    // We only want to close the UI window if an update is not in progress.
    if (update_in_progress == false){
        if ((parent.Right_Matrix.UI_window != null) && (!parent.Right_Matrix.UI_window.closed)){
            parent.Right_Matrix.UI_window.close();
        }
        parent.Right_Matrix.UI_window = null; 
    }
}

</script>
</head>

<body onUnload="CloseUI();">
<center>
<script language="JavaScript">


if (parent.Right_Matrix != null){
    document.write("<b>Right Matrix</b><br><br>");
    parent.Right_Matrix.print();
}

var update_in_progress = false;

document.write("<br><form>");

current_state = parent.control_frame.Simulation_State;
if (current_state == "CHECKSUM_COMPUTED" || current_state == "MATRIX_OPERATION_COMPLETE"){
    document.write("<input type=\"button\" value=\"Introduce Errors\" onClick=\"EditMatrix()\">");
}
else {
    document.write("<input type=\"button\" value=\"Edit Matrix\" onClick=\"EditMatrix()\">");
}

document.write("<\/form>");

</script>


</center>
</body>
</html>